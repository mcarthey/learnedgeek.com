<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="450" fill="#1a1a2e"/>
  <defs>
    <pattern id="grid11" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#2a2a3e" stroke-width="0.5"/>
    </pattern>
  </defs>
  <rect width="800" height="450" fill="url(#grid11)" opacity="0.3"/>

  <!-- Request flow -->
  <text x="400" y="35" font-family="'Segoe UI', sans-serif" font-size="12" fill="#6272a4" text-anchor="middle">REQUEST PIPELINE</text>

  <!-- Request arrow -->
  <rect x="40" y="50" width="100" height="36" fill="#282a36" rx="6" stroke="#8be9fd" stroke-width="1"/>
  <text x="90" y="72" font-family="monospace" font-size="10" fill="#8be9fd" text-anchor="middle">Request</text>

  <!-- [Authorize] gate -->
  <rect x="170" y="50" width="120" height="36" fill="#282a36" rx="6" stroke="#50fa7b" stroke-width="1.5"/>
  <text x="230" y="72" font-family="monospace" font-size="10" fill="#50fa7b" text-anchor="middle">[Authorize]</text>

  <!-- Arrow -->
  <text x="150" y="72" font-family="monospace" font-size="14" fill="#6272a4">→</text>
  <text x="300" y="72" font-family="monospace" font-size="14" fill="#6272a4">→</text>

  <!-- [RequiresTier] gate - highlighted -->
  <rect x="320" y="50" width="180" height="36" fill="#282a36" rx="6" stroke="#ff79c6" stroke-width="2"/>
  <text x="410" y="72" font-family="monospace" font-size="10" fill="#ff79c6" text-anchor="middle">[RequiresTier(Premium)]</text>

  <!-- Arrow -->
  <text x="510" y="72" font-family="monospace" font-size="14" fill="#6272a4">→</text>

  <!-- Controller -->
  <rect x="540" y="50" width="120" height="36" fill="#282a36" rx="6" stroke="#f1fa8c" stroke-width="1"/>
  <text x="600" y="72" font-family="monospace" font-size="10" fill="#f1fa8c" text-anchor="middle">Controller</text>

  <!-- Arrow -->
  <text x="670" y="72" font-family="monospace" font-size="14" fill="#6272a4">→</text>

  <!-- 200 OK -->
  <rect x="700" y="50" width="60" height="36" fill="#50fa7b" rx="6" opacity="0.3"/>
  <text x="730" y="72" font-family="monospace" font-size="10" fill="#50fa7b" text-anchor="middle">200</text>

  <!-- Rejected request path -->
  <line x1="410" y1="86" x2="410" y2="120" stroke="#ff5555" stroke-width="1.5" stroke-dasharray="4"/>
  <rect x="320" y="120" width="180" height="36" fill="#ff5555" rx="6" opacity="0.2"/>
  <text x="410" y="142" font-family="monospace" font-size="10" fill="#ff5555" text-anchor="middle">403 + Upgrade URL</text>

  <!-- Tier enum -->
  <rect x="40" y="110" width="240" height="140" fill="#282a36" rx="8" stroke="#bd93f9" stroke-width="1"/>
  <text x="160" y="134" font-family="monospace" font-size="11" fill="#bd93f9" text-anchor="middle" font-weight="bold">SubscriptionTier</text>
  <rect x="60" y="144" width="60" height="18" fill="#6272a4" rx="3" opacity="0.3"/>
  <text x="90" y="158" font-family="monospace" font-size="9" fill="#6272a4" text-anchor="middle">Free = 0</text>
  <rect x="60" y="168" width="80" height="18" fill="#8be9fd" rx="3" opacity="0.2"/>
  <text x="100" y="182" font-family="monospace" font-size="9" fill="#8be9fd" text-anchor="middle">Premium = 1</text>
  <rect x="60" y="192" width="100" height="18" fill="#f1fa8c" rx="3" opacity="0.2"/>
  <text x="110" y="206" font-family="monospace" font-size="9" fill="#f1fa8c" text-anchor="middle">PremiumPlus = 2</text>
  <text x="60" y="235" font-family="monospace" font-size="8" fill="#6272a4">Enum comparison: player.Tier >= required</text>

  <!-- Action filter code -->
  <rect x="40" y="270" width="340" height="130" fill="#282a36" rx="6"/>
  <text x="56" y="292" font-family="monospace" font-size="10" fill="#ff79c6">public class</text>
  <text x="134" y="292" font-family="monospace" font-size="10" fill="#8be9fd"> TierGateFilter</text>
  <text x="264" y="292" font-family="monospace" font-size="10" fill="#f8f8f2"> : IActionFilter</text>
  <text x="56" y="312" font-family="monospace" font-size="10" fill="#f8f8f2">{</text>
  <text x="72" y="332" font-family="monospace" font-size="10" fill="#ff79c6">var</text>
  <text x="96" y="332" font-family="monospace" font-size="10" fill="#f8f8f2"> tier = User.</text>
  <text x="178" y="332" font-family="monospace" font-size="10" fill="#50fa7b">GetTier()</text>
  <text x="252" y="332" font-family="monospace" font-size="10" fill="#f8f8f2">;</text>
  <text x="72" y="352" font-family="monospace" font-size="10" fill="#ff79c6">if</text>
  <text x="88" y="352" font-family="monospace" font-size="10" fill="#f8f8f2"> (tier &lt; required)</text>
  <text x="88" y="372" font-family="monospace" font-size="10" fill="#f8f8f2">  context.Result = </text>
  <text x="262" y="372" font-family="monospace" font-size="10" fill="#ff5555">403</text>
  <text x="56" y="392" font-family="monospace" font-size="10" fill="#f8f8f2">}</text>

  <!-- 403 Response -->
  <rect x="420" y="270" width="340" height="130" fill="#282a36" rx="6" stroke="#ff5555" stroke-width="1"/>
  <text x="590" y="292" font-family="monospace" font-size="11" fill="#ff5555" text-anchor="middle" font-weight="bold">403 Response</text>
  <text x="440" y="316" font-family="monospace" font-size="9" fill="#f8f8f2">{</text>
  <text x="450" y="334" font-family="monospace" font-size="9" fill="#8be9fd">  "error"</text>
  <text x="508" y="334" font-family="monospace" font-size="9" fill="#f8f8f2">: "Premium required",</text>
  <text x="450" y="352" font-family="monospace" font-size="9" fill="#8be9fd">  "currentTier"</text>
  <text x="544" y="352" font-family="monospace" font-size="9" fill="#f8f8f2">: "Free",</text>
  <text x="450" y="370" font-family="monospace" font-size="9" fill="#8be9fd">  "requiredTier"</text>
  <text x="552" y="370" font-family="monospace" font-size="9" fill="#f8f8f2">: "Premium",</text>
  <text x="450" y="388" font-family="monospace" font-size="9" fill="#50fa7b">  "upgradeUrl"</text>
  <text x="536" y="388" font-family="monospace" font-size="9" fill="#f8f8f2">: "/pricing"</text>
  <text x="440" y="396" font-family="monospace" font-size="9" fill="#f8f8f2">}</text>

  <!-- Title -->
  <text x="400" y="428" font-family="'Segoe UI', Arial, sans-serif" font-size="22" fill="#f8f8f2" text-anchor="middle" font-weight="bold">Tier Gating with Action Filters</text>
  <text x="400" y="448" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#6272a4" text-anchor="middle">Subscription enforcement as a single attribute</text>
</svg>