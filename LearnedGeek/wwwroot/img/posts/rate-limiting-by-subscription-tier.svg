<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="450" fill="#1a1a2e"/>
  <defs>
    <pattern id="grid5" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#2a2a3e" stroke-width="0.5"/>
    </pattern>
  </defs>
  <rect width="800" height="450" fill="url(#grid5)" opacity="0.3"/>

  <!-- Three tier gauges -->
  <!-- Free tier -->
  <g transform="translate(120, 80)">
    <rect x="-80" y="-20" width="160" height="200" fill="#282a36" rx="8" stroke="#6272a4" stroke-width="1.5"/>
    <text x="0" y="4" font-family="'Segoe UI', sans-serif" font-size="14" fill="#6272a4" text-anchor="middle" font-weight="bold">FREE</text>
    <text x="0" y="24" font-family="monospace" font-size="10" fill="#6272a4" text-anchor="middle">$0/month</text>
    <!-- Gauge bar -->
    <rect x="-50" y="45" width="100" height="20" fill="#44475a" rx="3"/>
    <rect x="-50" y="45" width="20" height="20" fill="#6272a4" rx="3"/>
    <text x="0" y="85" font-family="monospace" font-size="28" fill="#6272a4" text-anchor="middle" font-weight="bold">60</text>
    <text x="0" y="105" font-family="monospace" font-size="10" fill="#6272a4" text-anchor="middle">req/min</text>
    <text x="0" y="135" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">X-RateLimit-Limit: 60</text>
    <text x="0" y="150" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">X-RateLimit-Remaining: 0</text>
    <text x="0" y="168" font-family="monospace" font-size="8" fill="#ff5555" text-anchor="middle">429 Too Many Requests</text>
  </g>

  <!-- Premium tier -->
  <g transform="translate(400, 80)">
    <rect x="-80" y="-20" width="160" height="200" fill="#282a36" rx="8" stroke="#f1fa8c" stroke-width="1.5"/>
    <text x="0" y="4" font-family="'Segoe UI', sans-serif" font-size="14" fill="#f1fa8c" text-anchor="middle" font-weight="bold">PREMIUM</text>
    <text x="0" y="24" font-family="monospace" font-size="10" fill="#f1fa8c" text-anchor="middle">$5/month</text>
    <!-- Gauge bar -->
    <rect x="-50" y="45" width="100" height="20" fill="#44475a" rx="3"/>
    <rect x="-50" y="45" width="40" height="20" fill="#f1fa8c" rx="3"/>
    <text x="0" y="85" font-family="monospace" font-size="28" fill="#f1fa8c" text-anchor="middle" font-weight="bold">120</text>
    <text x="0" y="105" font-family="monospace" font-size="10" fill="#f1fa8c" text-anchor="middle">req/min</text>
    <text x="0" y="135" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">Tier from JWT claim</text>
    <text x="0" y="150" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">No DB lookup needed</text>
    <text x="0" y="168" font-family="monospace" font-size="8" fill="#50fa7b" text-anchor="middle">ConcurrentDictionary</text>
  </g>

  <!-- Premium+ tier -->
  <g transform="translate(680, 80)">
    <rect x="-80" y="-20" width="160" height="200" fill="#282a36" rx="8" stroke="#bd93f9" stroke-width="1.5"/>
    <text x="0" y="4" font-family="'Segoe UI', sans-serif" font-size="14" fill="#bd93f9" text-anchor="middle" font-weight="bold">PREMIUM+</text>
    <text x="0" y="24" font-family="monospace" font-size="10" fill="#bd93f9" text-anchor="middle">$10/month</text>
    <!-- Gauge bar -->
    <rect x="-50" y="45" width="100" height="20" fill="#44475a" rx="3"/>
    <rect x="-50" y="45" width="100" height="20" fill="#bd93f9" rx="3"/>
    <text x="0" y="85" font-family="monospace" font-size="28" fill="#bd93f9" text-anchor="middle" font-weight="bold">300</text>
    <text x="0" y="105" font-family="monospace" font-size="10" fill="#bd93f9" text-anchor="middle">req/min</text>
    <text x="0" y="135" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">Stochastic cleanup</text>
    <text x="0" y="150" font-family="monospace" font-size="8" fill="#44475a" text-anchor="middle">1% chance per request</text>
    <text x="0" y="168" font-family="monospace" font-size="8" fill="#50fa7b" text-anchor="middle">Thread-safe locking</text>
  </g>

  <!-- 429 JSON response -->
  <rect x="140" y="300" width="520" height="80" fill="#282a36" rx="6" stroke="#ff5555" stroke-width="1"/>
  <text x="160" y="320" font-family="monospace" font-size="10" fill="#f8f8f2">{ "error": "Rate limit exceeded",</text>
  <text x="160" y="336" font-family="monospace" font-size="10" fill="#f8f8f2">  "tier": "Free", "limit": 60,</text>
  <text x="160" y="352" font-family="monospace" font-size="10" fill="#f8f8f2">  "retryAfterSeconds": 34,</text>
  <text x="160" y="368" font-family="monospace" font-size="10" fill="#8be9fd">  "upgradeUrl": "apicombat.com/Premium" }</text>

  <!-- Title -->
  <text x="400" y="416" font-family="'Segoe UI', Arial, sans-serif" font-size="22" fill="#f8f8f2" text-anchor="middle" font-weight="bold">Rate Limiting by Subscription Tier</text>
  <text x="400" y="440" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#6272a4" text-anchor="middle">A dictionary, a lock, and a switch statement</text>
</svg>