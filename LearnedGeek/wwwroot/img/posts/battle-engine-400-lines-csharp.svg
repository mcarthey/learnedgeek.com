<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="450" fill="#1a1a2e"/>
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#2a2a3e" stroke-width="0.5"/>
    </pattern>
  </defs>
  <rect width="800" height="450" fill="url(#grid)" opacity="0.3"/>

  <!-- Code editor window -->
  <rect x="50" y="40" width="340" height="280" fill="#282a36" rx="8" stroke="#44475a" stroke-width="1"/>
  <rect x="50" y="40" width="340" height="28" fill="#44475a" rx="8"/>
  <rect x="50" y="56" width="340" height="12" fill="#44475a"/>
  <circle cx="70" cy="54" r="5" fill="#ff5555"/>
  <circle cx="86" cy="54" r="5" fill="#f1fa8c"/>
  <circle cx="102" cy="54" r="5" fill="#50fa7b"/>
  <text x="200" y="58" font-family="monospace" font-size="10" fill="#6272a4" text-anchor="middle">DeclarativeStrategyEngine.cs</text>

  <!-- Code lines -->
  <text x="66" y="90" font-family="monospace" font-size="11" fill="#ff79c6">public</text>
  <text x="108" y="90" font-family="monospace" font-size="11" fill="#8be9fd">BattleResult</text>
  <text x="196" y="90" font-family="monospace" font-size="11" fill="#50fa7b">ResolveBattle</text>
  <text x="66" y="108" font-family="monospace" font-size="11" fill="#f8f8f2">{</text>
  <text x="82" y="126" font-family="monospace" font-size="11" fill="#ff79c6">while</text>
  <text x="118" y="126" font-family="monospace" font-size="11" fill="#f8f8f2">(BothTeamsAlive)</text>
  <text x="82" y="144" font-family="monospace" font-size="11" fill="#f8f8f2">{</text>
  <text x="98" y="162" font-family="monospace" font-size="11" fill="#6272a4">// Initiative order</text>
  <text x="98" y="180" font-family="monospace" font-size="11" fill="#ff79c6">var</text>
  <text x="122" y="180" font-family="monospace" font-size="11" fill="#f8f8f2">action =</text>
  <text x="186" y="180" font-family="monospace" font-size="11" fill="#50fa7b">DetermineAction</text>
  <text x="98" y="198" font-family="monospace" font-size="11" fill="#50fa7b">ExecuteAction</text>
  <text x="190" y="198" font-family="monospace" font-size="11" fill="#f8f8f2">(action);</text>
  <text x="82" y="216" font-family="monospace" font-size="11" fill="#f8f8f2">}</text>
  <text x="66" y="234" font-family="monospace" font-size="11" fill="#f8f8f2">}</text>
  <text x="66" y="260" font-family="monospace" font-size="10" fill="#6272a4">// ~400 lines. No game engine.</text>

  <!-- Battle visualization (right side) -->
  <!-- Crossed swords -->
  <line x1="520" y1="60" x2="640" y2="180" stroke="#ff6b6b" stroke-width="4" stroke-linecap="round"/>
  <line x1="640" y1="60" x2="520" y2="180" stroke="#4ecdc4" stroke-width="4" stroke-linecap="round"/>
  <polygon points="518,56 524,64 514,64" fill="#ff6b6b"/>
  <polygon points="642,56 648,64 636,64" fill="#4ecdc4"/>

  <!-- Turn counter -->
  <rect x="548" y="95" width="64" height="30" fill="#2a2a3e" rx="4" stroke="#f1fa8c" stroke-width="1"/>
  <text x="580" y="115" font-family="monospace" font-size="12" fill="#f1fa8c" text-anchor="middle">Turn 14</text>

  <!-- Damage pipeline -->
  <g transform="translate(470, 210)">
    <rect width="280" height="36" fill="#2a2a3e" rx="4" stroke="#bd93f9" stroke-width="1"/>
    <text x="140" y="15" font-family="monospace" font-size="9" fill="#bd93f9" text-anchor="middle">DAMAGE PIPELINE</text>
    <text x="140" y="28" font-family="monospace" font-size="8" fill="#f8f8f2" text-anchor="middle">Base → Formation → Class → Crit → Env → Defense</text>
  </g>

  <!-- Result JSON -->
  <rect x="470" y="264" width="280" height="80" fill="#282a36" rx="4" stroke="#50fa7b" stroke-width="1"/>
  <text x="486" y="282" font-family="monospace" font-size="10" fill="#f8f8f2">{ "winner": "player-456",</text>
  <text x="486" y="296" font-family="monospace" font-size="10" fill="#f8f8f2">  "turns": 14,</text>
  <text x="486" y="310" font-family="monospace" font-size="10" fill="#f8f8f2">  "replay": "deterministic",</text>
  <text x="486" y="324" font-family="monospace" font-size="10" fill="#f8f8f2">  "seed": 0x7A3F }</text>

  <!-- Arrow from code to battle -->
  <line x1="395" y1="180" x2="460" y2="120" stroke="#6272a4" stroke-width="2" stroke-dasharray="6,4"/>
  <polygon points="460,116 454,126 464,126" fill="#6272a4"/>

  <!-- Title -->
  <text x="400" y="400" font-family="'Segoe UI', Arial, sans-serif" font-size="22" fill="#f8f8f2" text-anchor="middle" font-weight="bold">Battle Engine in 400 Lines</text>
  <text x="400" y="425" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#6272a4" text-anchor="middle">No Unity. No game engine. Just C# and math.</text>
</svg>