<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="ci_bg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#1a1a2e"/>
      <stop offset="100%" stop-color="#16213e"/>
    </linearGradient>
    <linearGradient id="ci_job1" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#166534"/>
      <stop offset="100%" stop-color="#14532d"/>
    </linearGradient>
    <linearGradient id="ci_job2" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#1e40af"/>
      <stop offset="100%" stop-color="#1e3a5f"/>
    </linearGradient>
    <linearGradient id="ci_job3" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#6b21a8"/>
      <stop offset="100%" stop-color="#4c1d95"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="800" height="450" fill="url(#ci_bg)"/>

  <!-- Subtle grid -->
  <g opacity="0.05">
    <line x1="0" y1="100" x2="800" y2="100" stroke="#94a3b8" stroke-width="0.5"/>
    <line x1="0" y1="200" x2="800" y2="200" stroke="#94a3b8" stroke-width="0.5"/>
    <line x1="0" y1="300" x2="800" y2="300" stroke="#94a3b8" stroke-width="0.5"/>
    <line x1="200" y1="0" x2="200" y2="450" stroke="#94a3b8" stroke-width="0.5"/>
    <line x1="400" y1="0" x2="400" y2="450" stroke="#94a3b8" stroke-width="0.5"/>
    <line x1="600" y1="0" x2="600" y2="450" stroke="#94a3b8" stroke-width="0.5"/>
  </g>

  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#e2e8f0">Anatomy of a CI Workflow</text>
  <text x="400" y="56" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#94a3b8">GitHub Actions  |  3 Jobs  |  2 Runners  |  Every Push</text>

  <!-- Trigger block -->
  <g transform="translate(40, 80)">
    <rect x="0" y="0" width="720" height="40" rx="6" fill="#0f172a" stroke="#334155" stroke-width="1"/>
    <text x="14" y="16" font-family="'Courier New', monospace" font-size="10" fill="#fbbf24">on:</text>
    <text x="14" y="30" font-family="'Courier New', monospace" font-size="9" fill="#94a3b8">push: main, claude/**, feature/**, fix/**</text>
    <text x="380" y="30" font-family="'Courier New', monospace" font-size="9" fill="#94a3b8">pull_request: main</text>

    <!-- Concurrency badge -->
    <rect x="560" y="6" width="150" height="26" rx="4" fill="#1e293b" stroke="#475569" stroke-width="0.5"/>
    <text x="635" y="23" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f59e0b">cancel-in-progress: true</text>
  </g>

  <!-- Arrow from trigger to jobs -->
  <line x1="400" y1="120" x2="400" y2="140" stroke="#475569" stroke-width="1.5"/>
  <line x1="400" y1="140" x2="140" y2="155" stroke="#475569" stroke-width="1"/>
  <line x1="400" y1="140" x2="400" y2="155" stroke="#475569" stroke-width="1"/>
  <line x1="400" y1="140" x2="660" y2="155" stroke="#475569" stroke-width="1"/>

  <!-- Job 1: Build & Test -->
  <g transform="translate(30, 160)">
    <rect x="0" y="0" width="220" height="200" rx="8" fill="url(#ci_job1)" stroke="#4ade80" stroke-width="1.5"/>

    <!-- Header -->
    <rect x="0" y="0" width="220" height="32" rx="8" fill="#22c55e" opacity="0.2"/>
    <rect x="0" y="24" width="220" height="8" fill="#22c55e" opacity="0.2"/>
    <text x="110" y="21" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4ade80">build-and-test</text>

    <!-- Runner -->
    <rect x="12" y="42" width="90" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="57" y="56" text-anchor="middle" font-family="'Courier New', monospace" font-size="9" fill="#94a3b8">ubuntu-latest</text>

    <!-- Trigger badge -->
    <rect x="110" y="42" width="98" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="159" y="56" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fbbf24">every push/PR</text>

    <!-- Steps -->
    <text x="18" y="80" font-family="Arial, sans-serif" font-size="9" fill="#86efac">1.</text>
    <text x="30" y="80" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Checkout code</text>

    <text x="18" y="97" font-family="Arial, sans-serif" font-size="9" fill="#86efac">2.</text>
    <text x="30" y="97" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Setup .NET 9.0</text>

    <text x="18" y="114" font-family="Arial, sans-serif" font-size="9" fill="#86efac">3.</text>
    <text x="30" y="114" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Restore NuGet (cached)</text>

    <text x="18" y="131" font-family="Arial, sans-serif" font-size="9" fill="#86efac">4.</text>
    <text x="30" y="131" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Build 6 projects (Release)</text>

    <text x="18" y="148" font-family="Arial, sans-serif" font-size="9" fill="#86efac">5.</text>
    <text x="30" y="148" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Run xUnit tests + coverage</text>

    <text x="18" y="165" font-family="Arial, sans-serif" font-size="9" fill="#86efac">6.</text>
    <text x="30" y="165" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Upload artifacts</text>

    <!-- Always badge -->
    <rect x="130" y="155" width="78" height="18" rx="3" fill="#0f172a" stroke="#f59e0b" stroke-width="0.5"/>
    <text x="169" y="168" text-anchor="middle" font-family="'Courier New', monospace" font-size="8" fill="#f59e0b">if: always()</text>

    <!-- Output -->
    <rect x="12" y="180" width="196" height="14" rx="2" fill="#0f172a" opacity="0.5"/>
    <text x="110" y="191" text-anchor="middle" font-family="'Courier New', monospace" font-size="8" fill="#64748b">.trx + cobertura.xml (14 days)</text>
  </g>

  <!-- Job 2: Build MAUI -->
  <g transform="translate(290, 160)">
    <rect x="0" y="0" width="220" height="200" rx="8" fill="url(#ci_job2)" stroke="#60a5fa" stroke-width="1.5"/>

    <!-- Header -->
    <rect x="0" y="0" width="220" height="32" rx="8" fill="#3b82f6" opacity="0.2"/>
    <rect x="0" y="24" width="220" height="8" fill="#3b82f6" opacity="0.2"/>
    <text x="110" y="21" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#60a5fa">build-maui</text>

    <!-- Runner -->
    <rect x="12" y="42" width="72" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="48" y="56" text-anchor="middle" font-family="'Courier New', monospace" font-size="9" fill="#94a3b8">macos-15</text>

    <!-- Trigger badge -->
    <rect x="92" y="42" width="116" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="150" y="56" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fbbf24">main + PRs only</text>

    <!-- Steps -->
    <text x="18" y="80" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">1.</text>
    <text x="30" y="80" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Checkout code</text>

    <text x="18" y="97" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">2.</text>
    <text x="30" y="97" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Setup .NET 9.0</text>

    <text x="18" y="114" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">3.</text>
    <text x="30" y="114" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Install MAUI workload</text>

    <text x="18" y="131" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">4.</text>
    <text x="30" y="131" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Restore NuGet (cached)</text>

    <text x="18" y="148" font-family="Arial, sans-serif" font-size="9" fill="#93c5fd">5.</text>
    <text x="30" y="148" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Build UI + App (Android)</text>

    <!-- Cost note -->
    <rect x="12" y="168" width="196" height="26" rx="3" fill="#0f172a" opacity="0.5"/>
    <text x="110" y="179" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#f59e0b">macOS = 10x minute cost</text>
    <text x="110" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#64748b">Gated to main/PRs to save $</text>
  </g>

  <!-- Job 3: PR Summary -->
  <g transform="translate(550, 160)">
    <rect x="0" y="0" width="220" height="200" rx="8" fill="url(#ci_job3)" stroke="#a78bfa" stroke-width="1.5"/>

    <!-- Header -->
    <rect x="0" y="0" width="220" height="32" rx="8" fill="#8b5cf6" opacity="0.2"/>
    <rect x="0" y="24" width="220" height="8" fill="#8b5cf6" opacity="0.2"/>
    <text x="110" y="21" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#a78bfa">pr-summary</text>

    <!-- Runner -->
    <rect x="12" y="42" width="90" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="57" y="56" text-anchor="middle" font-family="'Courier New', monospace" font-size="9" fill="#94a3b8">ubuntu-latest</text>

    <!-- Trigger badge -->
    <rect x="110" y="42" width="98" height="20" rx="3" fill="#0f172a" opacity="0.6"/>
    <text x="159" y="56" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fbbf24">PRs only</text>

    <!-- Steps -->
    <text x="18" y="80" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">1.</text>
    <text x="30" y="80" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Download test artifacts</text>

    <text x="18" y="97" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">2.</text>
    <text x="30" y="97" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Parse .trx results</text>

    <text x="18" y="114" font-family="Arial, sans-serif" font-size="9" fill="#c4b5fd">3.</text>
    <text x="30" y="114" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">Post summary to PR</text>

    <!-- Needs badge -->
    <rect x="12" y="135" width="196" height="22" rx="3" fill="#0f172a" opacity="0.5" stroke="#f59e0b" stroke-width="0.5"/>
    <text x="110" y="150" text-anchor="middle" font-family="'Courier New', monospace" font-size="9" fill="#f59e0b">needs: build-and-test</text>

    <!-- Permissions badge -->
    <rect x="12" y="165" width="196" height="22" rx="3" fill="#0f172a" opacity="0.5"/>
    <text x="110" y="180" text-anchor="middle" font-family="'Courier New', monospace" font-size="9" fill="#64748b">permissions: pull-requests: write</text>
  </g>

  <!-- Dependency arrow from Job 1 to Job 3 -->
  <path d="M 250 310 C 300 340 500 340 550 310" fill="none" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="6,3"/>
  <polygon points="547,313 557,310 550,303" fill="#f59e0b"/>
  <text x="400" y="348" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f59e0b">needs (waits for artifacts)</text>

  <!-- Parallel label between Job 1 and Job 2 -->
  <text x="274" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#475569" transform="rotate(-90, 274, 250)">parallel</text>

  <!-- Bottom tagline -->
  <text x="400" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">Every push gets tested. Every PR gets a report. No exceptions.</text>
</svg>